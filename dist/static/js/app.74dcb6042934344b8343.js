webpackJsonp([1],{Ifch:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=s("VU/8")({name:"App"},i,!1,function(e){s("gsu9")},null,null).exports,n=s("/ocq"),l={name:"Vote",data:function(){return{msg:"Vote",SelectedNum:1,selectSexVal:"",selectDepartVal:"",departId:"0",sexId:"0",checkId:"",personList:[{depart:{departName:"男-设计",id:"1",children:[{name:"陈永杰",id:"1",sex:"1"},{name:"姚鑫",id:"2",sex:"1"},{name:"叶志勇",id:"3",sex:"1"},{name:"陈晨",id:"4",sex:"1"},{name:"陈杰",id:"5",sex:"1"},{name:"易剑芸",id:"6",sex:"1"}]}},{depart:{departName:"女-设计",id:"1",children:[{name:"陈丽丽",id:"11",sex:"2"},{name:"易艳君",id:"12",sex:"2"},{name:"张琪媛",id:"13",sex:"2"},{name:"夏玲玉",id:"14",sex:"2"}]}},{depart:{departName:"男-前端",id:"2",children:[{name:"温富杰",id:"21",sex:"1"},{name:"黄剑坤",id:"22",sex:"1"},{name:"刘宏",id:"23",sex:"1"},{name:"骆至坤",id:"24",sex:"1"},{name:"田文滨",id:"25",sex:"1"}]}},{depart:{departName:"女-前端",id:"2",children:[{name:"刘洪南",id:"31",sex:"2"},{name:"陈梅秀",id:"32",sex:"2"},{name:"李凌燕",id:"33",sex:"2"},{name:"李曼",id:"34",sex:"2"},{name:"周微微",id:"35",sex:"2"}]}}],unJoinIds:[],joinIds:[],isCheckIds:[]}},methods:{voteEvn:function(){var e=this;if(this.SelectedNum<=0)console.log("抽奖人数需要大于0");else{var t=this.arrayIntersection(this.arrDepart,this.arrSex);this.Arr=this.arrayIntersection(this.joinIds,t);var s=0,r=setInterval(function(){var t=e.getArrayItems(e.Arr,e.SelectedNum);30==s&&clearInterval(r),s++;for(var i=0;i<e.personList.length;i++)for(var a=e.personList[i].depart.children,n=0;n<a.length;n++){var l=a[n].id;t.includes(l)?a[n].selected=!0:a[n].selected=!1}},100)}},selectSexEvn:function(e){console.log(e),this.sexId="0",this.arrSex=[],e?(this.sexId=e,this.arrSex=this.getSexId(e)):(this.sexId="0",this.arrSex=this.IdsAll,this.arrDepart=this.IdsAll)},selectDepartEvn:function(e){this.departId="0",this.arrDepart=[],e?(this.departId=e,this.arrDepart=this.getEleId(e)):(this.departId="0",this.arrSex=this.IdsAll,this.arrDepart=this.IdsAll)},isCheckEvn:function(e){if(e.unJoin=!e.unJoin,e.unJoin){var t=this.joinIds.indexOf(e.id);this.joinIds.splice(t,1),this.unJoinIds.push(e.id)}else{var s=this.unJoinIds.indexOf(e.id);this.unJoinIds.splice(s,1),this.joinIds.push(e.id)}},getArrayItems:function(e,t){t<=0&&this.$message.warning("抽奖人数必须大于0");var s=new Array;for(var r in e)s.push(e[r]);this.return_array=new Array;for(var i=0;i<t&&s.length>0;i++){var a=Math.floor(Math.random()*s.length);this.return_array[i]=s[a],s.splice(a,1)}return this.return_array},arrayIntersection:function(e,t){return e.filter(function(e){return t.indexOf(e)>-1})},getEleId:function(e){for(var t=new Array,s=0;s<this.personList.length;s++){var r=this.personList[s].depart.children;if(this.personList[s].depart.id==e)for(var i=0;i<r.length;i++){var a=r[i].id;t.push(a)}}return t},getSexId:function(e){for(var t=new Array,s=0;s<this.personList.length;s++)for(var r=this.personList[s].depart.children,i=0;i<r.length;i++){var a=r[i].id;r[i].sex==e&&t.push(a)}return t}},created:function(){this.Arr=new Array;for(var e=0;e<this.personList.length;e++)for(var t=this.personList[e].depart.children,s=0;s<t.length;s++){var r=t[s].id;this.Arr.push(r),this.$set(t[s],"selected",!1),this.$set(t[s],"disabled",!1),this.$set(t[s],"unJoin",!1)}this.IdsAll=this.Arr.concat(),this.arrDepart=this.Arr.concat(),this.arrSex=this.Arr.concat(),this.joinIds=this.Arr.concat()}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vote-box"},[s("h2",[e._v(e._s(e.msg))]),e._v(" "),s("div",{staticClass:"person-list"},e._l(e.personList,function(t,r){return s("ul",{key:r,staticClass:"depart",attrs:{"depart-id":t.depart.id}},[s("h4",[e._v(e._s(t.depart.departName))]),e._v(" "),e._l(t.depart.children,function(r,i){return s("li",{key:i,staticClass:"depart-li",class:["0"==e.departId?"":e.departId==t.depart.id?"":"disabled","0"==e.sexId?"":e.sexId==r.sex?"":"disabled-sex",r.selected?"isSelected":"",r.unJoin?"isCheck":""],attrs:{id:r.id,"data-id":r.id,sex:r.sex},on:{click:function(t){e.isCheckEvn(r)}}},[e._v(e._s(r.name))])})],2)})),e._v(" "),s("div",{staticClass:"vote-opertion-box"},[s("el-button",{on:{click:e.voteEvn}},[e._v("抽奖")]),e._v(" "),s("el-select",{on:{change:e.selectDepartEvn},model:{value:e.selectDepartVal,callback:function(t){e.selectDepartVal=t},expression:"selectDepartVal"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),s("el-option",{attrs:{label:"设计",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"前端",value:"2"}})],1),e._v(" "),s("el-select",{on:{change:e.selectSexEvn},model:{value:e.selectSexVal,callback:function(t){e.selectSexVal=t},expression:"selectSexVal"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),s("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"女",value:"2"}})],1),e._v(" "),s("el-input-number",{model:{value:e.SelectedNum,callback:function(t){e.SelectedNum=t},expression:"SelectedNum"}})],1),e._v(" "),e._m(0),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tips-wrap"},[t("span",{staticClass:"disabled tips"},[this._v("XXX")]),this._v("不参与")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tips-wrap"},[t("span",{staticClass:" tips"},[this._v("XXX")]),this._v("参与")])}]};var o=s("VU/8")(l,d,!1,function(e){s("Ifch")},"data-v-70218072",null).exports;r.default.use(n.a);var c=new n.a({routes:[{path:"/",name:"vote",component:o}]}),h=s("zL8q"),p=s.n(h);s("tvR6");r.default.use(p.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:c,components:{App:a},template:"<App/>"})},gsu9:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.74dcb6042934344b8343.js.map