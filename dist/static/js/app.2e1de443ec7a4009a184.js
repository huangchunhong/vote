webpackJsonp([1],{NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=r("VU/8")({name:"App"},n,!1,function(e){r("gsu9")},null,null).exports,i=r("/ocq"),l=r("7t+N"),c=r.n(l),d={name:"Vote",data:function(){return{msg:"Vote",SelectedNum:1,selectSexVal:"",selectDepartVal:"",departId:"0",sexId:"0",checkId:"",personList:[{depart:{departName:"部门-WEB",id:"1",children:[{name:"A",id:"1",sex:"1",check:""},{name:"B",id:"2",sex:"1",check:""},{name:"C",id:"3",sex:"1",check:""},{name:"D",id:"4",sex:"1",check:""}]}},{depart:{departName:"部门-PHP",id:"2",children:[{name:"F",id:"11",sex:"2",check:""},{name:"G",id:"12",sex:"2",check:""},{name:"H",id:"13",sex:"2",check:""},{name:"I",id:"14",sex:"2",check:""}]}},{depart:{departName:"部门-JAVA",id:"3",children:[{name:"J",id:"21",sex:"1",check:""},{name:"K",id:"22",sex:"1",check:""},{name:"L",id:"23",sex:"1",check:""},{name:"M",id:"24",sex:"1",check:""}]}},{depart:{departName:"部门-TEST",id:"4",children:[{name:"N",id:"31",sex:"2",check:""},{name:"O",id:"32",sex:"2",check:""},{name:"P",id:"33",sex:"2",check:""},{name:"Q",id:"34",sex:"2",check:""}]}}]}},methods:{voteEvn:function(){var e=this;if(this.SelectedNum<=0)console.log("抽奖人数需要大于0");else{this.Arr=this.arrayIntersection(this.arrDepart,this.arrSex);var t=0,r=setInterval(function(){var a=e.getArrayItems(e.Arr,e.SelectedNum);console.log(a),10==t&&clearInterval(r),t++;for(var n=0;n<e.personList.length;n++)for(var s=e.personList[n].depart.children,i=0;i<s.length;i++){var l=s[i].id;a.includes(l)?s[i].check=l:s[i].check=""}},100)}},voteAllEvn:function(){c()(".depart-li").toggleClass("check")},selectSexEvn:function(e){this.sexId="0",this.arrSex=[],e?(this.sexId=e,this.arrSex=this.getSexId(e)):(this.sexId="0",this.getDataArr())},selectDepartEvn:function(e){this.departId="0",this.arrDepart=[],e?(this.departId=e,this.arrDepart=this.getEleId(e)):(this.departId="0",this.getDataArr())},getArrayItems:function(e,t){t<=0&&this.$message.warning("抽奖人数必须大于0");var r=new Array;for(var a in e)r.push(e[a]);this.return_array=new Array;for(var n=0;n<t&&r.length>0;n++){var s=Math.floor(Math.random()*r.length);this.return_array[n]=r[s],r.splice(s,1)}return this.return_array},arrayIntersection:function(e,t){for(var r=0,a=0,n=new Array;r<e.length&&a<t.length;)e[r]<t[a]?r++:e[r]>t[a]?a++:(n.push(e[r]),r++,a++);return n},getEleId:function(e){for(var t=new Array,r=0;r<this.personList.length;r++){var a=this.personList[r].depart.children;if(this.personList[r].depart.id==e)for(var n=0;n<a.length;n++){var s=a[n].id;t.push(s)}}return t},getSexId:function(e){for(var t=new Array,r=0;r<this.personList.length;r++)for(var a=this.personList[r].depart.children,n=0;n<a.length;n++){var s=a[n].id;a[n].sex==e&&t.push(s)}return t},getDataArr:function(){this.Arr=new Array;for(var e=0;e<this.personList.length;e++)for(var t=this.personList[e].depart.children,r=0;r<t.length;r++){var a=t[r].id;this.Arr.push(a)}this.arrDepart=this.Arr.concat(),this.arrSex=this.Arr.concat()}},created:function(){this.getDataArr()}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vote-box"},[r("h2",[e._v(e._s(e.msg))]),e._v(" "),r("div",{staticClass:"person-list"},e._l(e.personList,function(t,a){return r("ul",{key:a,staticClass:"depart",attrs:{"depart-id":t.depart.id}},[r("h4",[e._v(e._s(t.depart.departName))]),e._v(" "),e._l(t.depart.children,function(a,n){return r("li",{key:n,staticClass:"depart-li",class:["0"==e.departId?"":e.departId==t.depart.id?"":"disabled","0"==e.sexId?"":e.sexId==a.sex?"":"disabled-sex",a.check==a.id?"check":""],attrs:{id:a.id,"data-id":a.id,sex:a.sex}},[e._v(e._s(a.name))])})],2)})),e._v(" "),r("div",{staticClass:"vote-opertion-box"},[r("el-button",{on:{click:e.voteEvn}},[e._v("抽奖")]),e._v(" "),r("el-select",{attrs:{label:"部门"},on:{change:e.selectDepartEvn},model:{value:e.selectDepartVal,callback:function(t){e.selectDepartVal=t},expression:"selectDepartVal"}},[r("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),r("el-option",{attrs:{label:"部门-WEB",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"部门-PHP",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"部门-JAVA",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"部门-TEST",value:"4"}})],1),e._v(" "),r("el-select",{attrs:{label:"性别"},on:{change:e.selectSexEvn},model:{value:e.selectSexVal,callback:function(t){e.selectSexVal=t},expression:"selectSexVal"}},[r("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),r("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"女",value:"2"}})],1),e._v(" "),r("el-button",{on:{click:e.voteAllEvn}},[e._v("全选")]),e._v(" "),r("el-input-number",{model:{value:e.SelectedNum,callback:function(t){e.SelectedNum=t},expression:"SelectedNum"}})],1)])},staticRenderFns:[]};var h=r("VU/8")(d,o,!1,function(e){r("wIYW")},"data-v-5e6c028e",null).exports;a.default.use(i.a);var p=new i.a({routes:[{path:"/",name:"vote",component:h}]}),u=r("zL8q"),v=r.n(u);r("tvR6");a.default.use(v.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:p,components:{App:s},template:"<App/>"})},gsu9:function(e,t){},tvR6:function(e,t){},wIYW:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2e1de443ec7a4009a184.js.map